<div class="row mb-4 project">
  <div class="col-md-5">
    <h1>{{party.event_name}} - {{party.event_date}}</h1>
    <p>{{party.address}}</p>
    <form class="newGuest">
      <label>Name</label>
      <input placeholder="Your Name" id="name"></input>
      <label>Food</label>
      <input placeholder="ex. Hamburgers,Hotdogs..." id="food"></input>
      <label>Drink</label>
      <input placeholder="ex. Whiskey,Beer..." id="drink"></input>
      <button>Confirm Guest!</button>
    </form>
    <ul>
      {{#each party.guests}}
      <li>{{this.guestName}} {{this.guestDrink}} {{this.guestFood}} {{log this}}
        {{!-- <form id="guestFoodForm{{@index}}">
          <div id="guestFood" class="form-group">
            <label for="guestFood">Guest Food:</label>
            <textarea class="form-input" id="guestFoodDesc{{@index}}" name="guestFoodDesc"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>

        <form id="guestDrinkForm{{@index}}">
          <div id="guestDrink" class="form-group">
            <label for="guestDrink">Guest Drink:</label>
            <textarea class="form-input" id="guestDrinkDesc{{@index}}" name="guestDrinkDesc"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form> --}}

      </li>
      {{/each}}
    </ul>
  </div>
</div>

<script>
  const newGuest = (e) => {
    e.preventDefault()
    let name = document.querySelector("#name").value
    let food = document.querySelector("#food").value
    let drink = document.querySelector('#drink').value
    console.log(name, food, drink)
    const data = { name: name, food: food, drink: drink };
    fetch('/api/guest/party/{{party.id}}', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data),
      }) .then(()=>{
        window.location.href = '/party/{{party.id}}'
      })

  }
  document.querySelector(".newGuest").addEventListener("submit", newGuest)


</script>